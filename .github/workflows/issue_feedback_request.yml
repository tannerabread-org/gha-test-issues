# name: Request Feedback on Issue Close

on:
  issues:
    types: [closed]
    
permissions:
  issues: write
  
jobs:
  cleanup:
    name: Request Feedback
    runs-on: ubuntu-latest
    if: ${{ !github.event.issue.pull_request && !contains('<maintainer list>', github.event.issue.user.login) }}

    steps:
      - name: make comment requesting feedback
        shell: bash
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          ISSUE_NUMBER: ${{ github.event.issue.number }}
          ISSUE_URL: ${{ github.event.issue.html_url }}
          ISSUE_TITLE: ${{ github.event.issue.title }}
          OP: ${{ github.event.issue.user.login }}
          REPO: ${{ github.repository }}
        run: |
          gh issue comment $ISSUE_NUMBER --repo $REPO -b "ðŸ‘‹ @$OP
          Are you satisified with the resolution of your issue?
          [Yes](http://localhost:3001?issue_num=$ISSUE_NUMBER&issue=$ISSUE_URL&issue_title=$ISSUE_TITLE&response=yes&repo=$REPO&op=$OP) [No](http://localhost:3001?issue_num=$ISSUE_NUMBER&issue=$ISSUE_URL&issue_title=$ISSUE_TITLE&response=no&repo=$REPO&op=$OP)
          Sharing your experience helps us continually improve ourselves.
          We'd really appreciate you taking a few minutes to share your thoughts with us."
